<style>
  #contact-form table {
      width: 50%;
      margin: auto;
  }

  #contact-form input, select {
      margin-bottom: 1em;
  }

  #contact-form input, select, button {
      width: 100%;
  }

  #contact-form textarea {
      width: 100%;
      height: 400px;
  }

  #contact-form *.error-box {
      border: 3px double #ff0000;
  }
</style>

<header>
  <h1>Contact Me</h1>
</header>

<article id="contact-form">
  <form method="post" action="/cgi-bin/contact.cgi">
    <table>
      <tr>
	<td>
	  <input type="text" id="input-name" name="name" placeholder="Your name...">
	</td>
      </tr>

      <tr>
	<td>
	  <input type="email" id="input-email" name="email" placeholder="Your email...">
	</td>
      </tr>

      <tr>
	<td>
	  <select id="input-subject" name="subject">
	    <option value="0" selected="selected">General Inquires & Questions</option>
	    <option value="1">Content Correction</option>
	    <option value="2">Software Bug</option>
	  </select>
	</td>

      </tr>
      <tr>
	<td>
	  <textarea id="input-message" name="message"></textarea>
	</td>
      </tr>

      <tr>
	<td>
	  <button>Send</button>
	</td>
      </tr>
    </table>
  </form>
</article>

<script>
  let errorParams = new URLSearchParams(window.location.search);

  let input_elements = [
      { default: "name",    error: "error-name",    element: document.getElementById('input-name')    },
      { default: "email",   error: "error-email",   element: document.getElementById('input-email')   },
      { default: "subject", error: "error-subject", element: document.getElementById('input-subject') },
      { default: "message", error: "error-message", element: document.getElementById('input-message') }
  ];

  for (let i = 0; i < input_elements.length; i++) {
      if (errorParams.has(input_elements[i].default)) {
	  console.log();
	  switch (input_elements[i].element.tagName) {
	  case 'INPUT':
	      input_elements[i].element.setAttribute('value', errorParams.get(input_elements[i].default));
	      break;
	  case 'TEXTAREA':
	      input_elements[i].element.innerHTML = errorParams.get(input_elements[i].default);
	      break;
	  }
      }

      if (errorParams.has(input_elements[i].error)) {
	  input_elements[i].element.setAttribute('class', 'error-box');
      }
  }
</script>
